patch:
  tags:
    - Amenity
  summary: Update an amenity
  description: Update label and/or isActive for an amenity. Mirrors Celebrate/Joi validation.
  parameters:
    - name: id
      in: path
      required: true
      description: Amenity ID (UUID v4/v5).
      schema:
        type: string
        format: uuid
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          additionalProperties: false
          # If you later enforce at least one field in Joi, add: minProperties: 1
          properties:
            label:
              type: string
              minLength: 2
              maxLength: 100
              description: Human-readable amenity name.
              example: Rooftop Pool
            value:
              type: string
              minLength: 2
              maxLength: 100
              description: Human-readable amenity value.
              example: Available
            isActive:
              description: Accepts boolean or strings "true"/"false". Server coerces strings to boolean.
              oneOf:
                - type: boolean
                - type: string
                  enum: ["true", "false"]
            icon:
              type: string
              nullable: true
              description: Optional icon name or URL.
              example: "wifi"
            files:
              type: object
              description: Optional files (only images are allowed)
              additionalProperties:
                type: array
                items:
                  type: object
                  properties:
                    fieldname:
                      type: string
                      description: The name of the field in the form data
                    originalname:
                      type: string
                      description: The original name of the file
                    encoding:
                      type: string
                      description: The encoding of the file
                    mimetype:
                      type: string
                      description: The MIME type of the file
                      example: "image/jpeg"
                    destination:
                      type: string
                      description: The file upload destination
                    filename:
                      type: string
                      description: The generated name of the file
                    path:
                      type: string
                      description: The path where the file is stored
                    size:
                      type: integer
                      description: The size of the file in bytes
                      example: 102400
        examples:
          updateLabel:
            value:
              label: "Rooftop Pool"
          updateActive:
            value:
              isActive: false
  responses:
    "200":
      description: Amenity updated successfully
      content:
        application/json:
          schema:
            type: object
            required: [data, message]
            properties:
              data:
                type: object
                additionalProperties: false
                required: [id, label, createdBy, isActive, createdAt, updatedAt]
                properties:
                  id:
                    type: string
                    format: uuid
                  label:
                    type: string
                    minLength: 2
                    maxLength: 100
                  createdBy:
                    type: string
                    format: uuid
                  isActive:
                    type: boolean
                  icon:
                    type: string
                    nullable: true
                  mediaId:
                    type: string
                    nullable: true
                  createdAt:
                    type: string
                    format: date-time
                  updatedAt:
                    type: string
                    format: date-time
              message:
                type: string
          examples:
            success:
              value:
                data:
                  id: "c5568a9c-db14-4c0b-8745-74b8e7a987ab"
                  label: "Rooftop Pool"
                  createdBy: "068156f2-71e2-4e6d-8753-895491076e67"
                  isActive: true
                  icon: null
                  mediaId: "a1f9c9e2-6f7a-4f2e-9b5a-9f2a1b3c4d5e"
                  createdAt: "2025-09-09T11:46:34.282Z"
                  updatedAt: "2025-09-09T12:10:02.100Z"
                message: "Amenity updated successfully"
    "400":
      description: Invalid input
      content:
        application/json:
          schema:
            $ref: "../../components/responses/ErrorResponse.yaml"
    "401":
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: "../../components/responses/ErrorResponse.yaml"
    "404":
      description: Amenity not found
      content:
        application/json:
          schema:
            $ref: "../../components/responses/ErrorResponse.yaml"
    "500":
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "../../components/responses/ErrorResponse.yaml"
